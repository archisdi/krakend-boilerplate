{{- define "endpoints" -}}
{{ range .Values.endpoints }}
- endpoint: {{ .endpoint }}
  method: {{ .method }}
  backend:
  {{ range .backend }}
    - url_pattern: {{ .url_pattern }}
      method: {{ .method }}
      host:
        - {{ .host }}
  {{ end }}
  {{- if .extra_config }}
  {{- if eq .extra_config "validator" }}
  extra_config:
    {{- template "krakend.jwt.validator" $.Values }}
  {{- else if eq .extra_config "signer" }}
  extra_config:
    {{- template "krakend.jwt.signer" $.Values }}
  {{- end }}
  {{- end }}
{{ end }}
{{- end -}}